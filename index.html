<!DOCTYPE html>

<html lang=”en”>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Document</title>
</head>
  
<body>
  

<h3> Realtime status monitoring </h3>
<button onclick="ledOn()">ON</button>
<button onclick="ledOff()">OFF</button>
<button onclick="status()">Status</button>
<button onclick="alertFn()">Alert</button>
<button onclick="promptFn()">Prompt</button> <br><br>

<input type="text" placeholder="Message" id="messageField">
<button onclick="sendMessage()">Send</button> <br><br>

<input type="file" /> 
<input type="submit" name="Upload" value="Upload" /> 
<br>
  


<script type="text/javascript" src="script.js"></script>
<script type = "text/javascript" src="function.js"></script>
  
<! — The core Firebase JS SDK is always required and must be listed first →
<script src="https://www.gstatic.com/firebasejs/8.2.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.2.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.2.0/firebase-database.js"></script>
  
  
 <script src=

"https://www.gstatic.com/firebasejs/3.7.4/firebase.js">

    </script>

   
  <div <p id="root"> </p> </div>
  <div id="root2"<\div>

  <script>
  // Import the functions you need from the SDKs you need
  // import { initializeApp } from "firebase/app";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

 
     const firebaseConfig = {
    apiKey: "AIzaSyCmNVaTr8sTKQVSqZprpBK-AMTpUsNPUGs",
    authDomain: "surbot-v1-1.firebaseapp.com",
    databaseURL: "https://surbot-v1-1-default-rtdb.firebaseio.com",
    projectId: "surbot-v1-1",
    storageBucket: "surbot-v1-1.appspot.com",
    messagingSenderId: "702504911981",
    appId: "1:702504911981:web:6d1fea970a851c7ff3ab64"
    };

    firebase.initializeApp(firebaseConfig);


       function ledOn(){  getCurrentDateTime();
          firebase.database().ref("LED").set({
           status: "ON",
           date: currentDateTime 
           });
          takeSnapshot();
          }
    
       function ledOff(){  getCurrentDateTime();
          firebase.database().ref("LED").set({
           status: "OFF",
           date: currentDateTime
           });
          takeSnapshot();
          }
    
       function status(){
           takeSnapshot();
            }
    
       function status(){
           takeSnapshot();
            }
    
           takeSnapshot();

       function takeSnapshot() {
              var ledRef = firebase.database().ref("LED");
              ledRef.on("value", function(snapshot) {
              // var led = snapshot.val();
              var ledStatus = snapshot.child("status").val();
              var ledDate = snapshot.child("date").val();
              document.getElementById("root").innerHTML = "";
              // document.getElementById("root").innerHTML += '<br>' + led ;
              document.getElementById("root").innerHTML += '<br>' + "Status: " + ledStatus ;
              document.getElementById("root").innerHTML +=  " "   + "Date: " + ledDate ;
               });
              }  
    
              var dateTime ;
       function getDateTime() {  
              var today = new Date();
              var date =  today.getDate() + "." + (today.getMonth()+1) + "." + today.getFullYear();
              var time= today.getHours() + ":" + today.getMinutes() + ":" + today.getSeconds();
                  dateTime = date +" "+ time;
              document.getElementById("root2").innerHTML += "";
              document.getElementById("root2").innerHTML += '<br>' + dateTime ;
              }  
    
              var currentDateTime ;
       function getCurrentDateTime() { 
              var currentDate = new Date();
              var currentDay   = currentDate.getDate() < 10 
                                 ? '0' + currentDate.getDate() 
                                 : currentDate.getDate();
              var currentMonth = currentDate.getMonth() < 9 
                                 ? '0' + (currentDate.getMonth() + 1) 
                                 : (currentDate.getMonth() + 1);
              var currentYear   = currentDate.getFullYear() < 10 
                                 ? '0' + currentDate.geFullYear() 
                                 : currentDate.getFyllYear();
              var currentHours   = currentDate.getHours() < 10 
                                 ? '0' + currentDate.geHours() 
                                 : currentDate.getHours();
              var currentMinuts   = currentDate.getMinuts() < 10 
                                 ? '0' + currentDate.getMinuts() 
                                 : currentDate.getMinuts();
              var currentSeconds = currentDate.getSeconds() < 10 
                                 ? '0' + currentDate.getSeconds() 
                                 : currentDate.getSeconds();
                 currentDateTime = currentDay
                                    +"."+ currentMonth
                                    +"."+ currentYera
                                    +" "+ currentHours
                                    +":"+ currentMinuts
                                    +":"+ currentSeconds ;
                                   }
     
   
    
    /*
    var ledRef = firebase.database().ref("LED");
    
    ledRef.on("value", function(snapshot) {
    snapshot.forEach(function(element) {

    document.querySelector('#root').innerHTML +=`
    <div>${element.val()}<\div>
     '
     });
    })
     */     

      
    /*
    function ledOn(){
      firebase.database().ref("LED").set({
       status:"ON"
        });
       }
    function ledOff(){
      firebase.database().ref("LED").set({
       status:"OFF"
        });
       }
     */
    
    
    </script>
  
</body>
</html>
